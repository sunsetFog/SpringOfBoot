<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.core.mapper.news.RouterMapper">
    <resultMap id="toRouterMap" type="com.core.pojo.news.Router.Router">
        <id column="id" property="id"/>
        <result column="parentId" property="parentId"/>
        <result column="path" property="path"/>
        <result column="metaTitle" property="metaTitle"/>
        <result column="importPath" property="importPath"/>
<!--        <collection property="menuList" ofType="com.core.pojo.news.Router.Router">-->
<!--            <id column="id" property="id"/>-->
<!--            <result column="parentId" property="parentId"/>-->
<!--            <result column="path" property="path"/>-->
<!--            <result column="metaTitle" property="metaTitle"/>-->
<!--            <result column="importPath" property="importPath"/>-->
<!--        </collection>-->
    </resultMap>

    <select id="isRouterList" resultMap="toRouterMap">
        select other5.id   id,
               other5.parentId    parentId,
               other5.path     path,
               other5.metaTitle   metaTitle,
               other5.importPath   importPath
        from ums_admin other1
            LEFT JOIN user_to_role other2 on other1.id = other2.user_id
            LEFT JOIN role other3 on other2.role_id = other3.id
            LEFT JOIN role_to_router other4 on other3.id = other4.role_id
            LEFT JOIN router other5 on other4.router_id = other5.id
        WHERE other1.username = #{username};
    </select>




    <resultMap id="toOperationMap" type="com.core.pojo.news.Router.Operation">
        <id column="id" property="id"/>
        <result column="operation_name" property="operation_name"/>
        <result column="operation_code" property="operation_code"/>
    </resultMap>

    <select id="isOperationList" resultMap="toOperationMap">
        select other5.id   id,
               other5.operation_code     operation_code,
               other5.operation_name    operation_name,
               other5.disabled     disabled,
               other5.hidden     hidden
        from ums_admin other1
            LEFT JOIN user_to_role other2 on other1.id = other2.user_id
            LEFT JOIN role other3 on other2.role_id = other3.id
            LEFT JOIN role_to_operation other4 on other3.id = other4.role_id
            LEFT JOIN operation other5 on other4.operation_id = other5.id
        WHERE other1.username = #{username};
    </select>



<!--    <select id="isRouterList" resultType="com.core.pojo.news.Router.Router">-->
<!--        select * from router-->
<!--    </select>-->
</mapper>